<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashback App</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            background: #000; 
            color: #fff; 
            font-family: Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            padding: 20px;
            text-align: center;
            background: #8B0000;
        }
        
        .photo-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .photo {
            width: 90%;
            height: 70%;
            background: #8B0000;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            position: relative;
        }
        
        .gesture-hints {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .hint {
            position: absolute;
            font-size: 30px;
            opacity: 0.3;
        }
        
        .hint-next { bottom: 20px; left: 20px; }
        .hint-prev { top: 20px; right: 20px; }
        
        .bottom-menu {
            background: #1a1a1a;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            border-top: 1px solid #333;
        }
        
        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            padding: 10px;
            cursor: pointer;
        }
        
        .menu-btn.active {
            color: #8B0000;
        }
        
        .screen {
            display: none;
            flex: 1;
            padding: 20px;
        }
        
        .screen.active {
            display: block;
        }
        
        .favorites-list, .settings-list {
            margin-top: 20px;
        }
        
        .fav-item, .setting-item {
            background: #1a1a1a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
        }
        
        .controls {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(139, 0, 0, 0.8);
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="header">
        <h1>üì∏ Flashback</h1>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ -->
    <div class="screen active" id="homeScreen">
        <div class="photo-container">
            <div class="photo" id="currentPhoto">
                üì∏ –§–û–¢–û 1
            </div>
            
            <div class="gesture-hints">
                <div class="hint hint-next">‚ÜóÔ∏è</div>
                <div class="hint hint-prev">‚ÜôÔ∏è</div>
            </div>
            
            <div class="controls">
                <button class="control-btn" onclick="previousPhoto()">‚Üê</button>
                <button class="control-btn" onclick="likePhoto()">‚ù§Ô∏è</button>
                <button class="control-btn" onclick="nextPhoto()">‚Üí</button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ -->
    <div class="screen" id="favoritesScreen">
        <h2>‚ù§Ô∏è –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h2>
        <div class="favorites-list" id="favoritesList">
            <!-- –°—é–¥–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ª–∞–π–∫–Ω—É—Ç—ã–µ —Ñ–æ—Ç–æ -->
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="screen" id="settingsScreen">
        <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
        <div class="settings-list">
            <div class="setting-item">
                <h3>üîß –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∂–µ—Å—Ç–æ–≤</h3>
                <button onclick="toggleHints()">–í–∫–ª—é—á–µ–Ω–æ</button>
            </div>
            <div class="setting-item">
                <h3>üé® –¶–≤–µ—Ç —Ç–µ–º—ã</h3>
                <button>–ë–æ—Ä–¥–æ–≤—ã–π</button>
            </div>
            <div class="setting-item">
                <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                <p>–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ —Ñ–æ—Ç–æ: <span id="viewedCount">0</span></p>
            </div>
        </div>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
    <div class="bottom-menu">
        <button class="menu-btn active" onclick="showScreen('homeScreen')">üì∏</button>
        <button class="menu-btn" onclick="showScreen('favoritesScreen')">‚ù§Ô∏è</button>
        <button class="menu-btn" onclick="showScreen('settingsScreen')">‚öôÔ∏è</button>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentPhotoIndex = 0;
        let likedPhotos = [];
        let viewedPhotos = 0;
        
        const photos = [
            { id: 1, title: "–§–æ—Ç–æ 1", liked: false },
            { id: 2, title: "–§–æ—Ç–æ 2", liked: false },
            { id: 3, title: "–§–æ—Ç–æ 3", liked: false },
            { id: 4, title: "–§–æ—Ç–æ 4", liked: false },
            { id: 5, title: "–§–æ—Ç–æ 5", liked: false }
        ];

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            updatePhotoDisplay();
            loadFromStorage();
        }

        // –ü–æ–∫–∞–∑ —Ñ–æ—Ç–æ
        function updatePhotoDisplay() {
            const photo = photos[currentPhotoIndex];
            document.getElementById('currentPhoto').innerHTML = `
                üì∏ ${photo.title}<br>
                <small>${photo.liked ? '‚ù§Ô∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–º' : '–°–≤–∞–π–ø ‚ÜóÔ∏è‚ÜôÔ∏è'}</small>
            `;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
            updateFavoritesList();
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–æ—Ç–æ
        function nextPhoto() {
            currentPhotoIndex = (currentPhotoIndex + 1) % photos.length;
            viewedPhotos++;
            updatePhotoDisplay();
            saveToStorage();
        }

        function previousPhoto() {
            currentPhotoIndex = (currentPhotoIndex - 1 + photos.length) % photos.length;
            viewedPhotos++;
            updatePhotoDisplay();
            saveToStorage();
        }

        // –õ–∞–π–∫ —Ñ–æ—Ç–æ
        function likePhoto() {
            const photo = photos[currentPhotoIndex];
            photo.liked = !photo.liked;
            
            if (photo.liked && !likedPhotos.includes(photo.id)) {
                likedPhotos.push(photo.id);
            } else if (!photo.liked) {
                likedPhotos = likedPhotos.filter(id => id !== photo.id);
            }
            
            updatePhotoDisplay();
            saveToStorage();
            alert(photo.liked ? "‚ù§Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!" : "üíî –£–±—Ä–∞–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ");
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        function updateFavoritesList() {
            const favoritesList = document.getElementById('favoritesList');
            const favoriteItems = photos.filter(photo => photo.liked);
            
            if (favoriteItems.length === 0) {
                favoritesList.innerHTML = '<p>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ</p>';
            } else {
                favoritesList.innerHTML = favoriteItems.map(photo => `
                    <div class="fav-item">
                        üì∏ ${photo.title}
                    </div>
                `).join('');
            }
            
            document.getElementById('viewedCount').textContent = viewedPhotos;
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
        function showScreen(screenId) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–∫—Ä–∞–Ω—ã
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω
            document.getElementById(screenId).classList.add('active');
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω—É–∂–Ω—É—é –∫–Ω–æ–ø–∫—É
            event.target.classList.add('active');
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–≤–∞–π–ø–æ–≤
        let startX = 0;
        let startY = 0;

        document.addEventListener('touchstart', function(e) {
            startX = e.touches[0].clientX;
            startY = e.touches[0].clientY;
        });

        document.addEventListener('touchend', function(e) {
            const endX = e.changedTouches[0].clientX;
            const endY = e.changedTouches[0].clientY;
            
            const diffX = endX - startX;
            const diffY = endY - startY;

            // ‚ÜóÔ∏è –ñ–µ—Å—Ç: –≤–ø—Ä–∞–≤–æ-–≤–≤–µ—Ä—Ö (—Å–ª–µ–¥—É—é—â–µ–µ —Ñ–æ—Ç–æ)
            if (diffX > 50 && diffY < -50) {
                nextPhoto();
            }
            
            // ‚ÜôÔ∏è –ñ–µ—Å—Ç: –≤–ª–µ–≤–æ-–≤–Ω–∏–∑ (–ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Ñ–æ—Ç–æ)
            if (diffX < -50 && diffY > 50) {
                previousPhoto();
            }
            
            // ‚û°Ô∏è –ü—Ä–æ—Å—Ç–æ–π —Å–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ
            if (Math.abs(diffX) > 50 && Math.abs(diffY) < 30) {
                if (diffX > 0) previousPhoto();
                else nextPhoto();
            }
        });

        // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        function saveToStorage() {
            const data = {
                likedPhotos: likedPhotos,
                viewedPhotos: viewedPhotos,
                currentIndex: currentPhotoIndex
            };
            localStorage.setItem('flashbackData', JSON.stringify(data));
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('flashbackData');
            if (saved) {
                const data = JSON.parse(saved);
                likedPhotos = data.likedPhotos || [];
                viewedPhotos = data.viewedPhotos || 0;
                currentPhotoIndex = data.currentIndex || 0;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ª–∞–π–∫–æ–≤
                photos.forEach(photo => {
                    photo.liked = likedPhotos.includes(photo.id);
                });
                
                updatePhotoDisplay();
            }
        }

        function toggleHints() {
            const hints = document.querySelector('.gesture-hints');
            hints.style.display = hints.style.display === 'none' ? 'block' : 'none';
            alert('–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∂–µ—Å—Ç–æ–≤ ' + (hints.style.display === 'none' ? '–≤—ã–∫–ª—é—á–µ–Ω—ã' : '–≤–∫–ª—é—á–µ–Ω—ã'));
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
